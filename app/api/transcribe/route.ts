import OpenAI from 'openai';export const runtime='nodejs';export const dynamic='force-dynamic';export async function POST(req:Request){try{const form=await req.formData();const file=form.get('audio');if(!(file instanceof File))return new Response(JSON.stringify({error:'No audio'}),{status:400});const client=new OpenAI({apiKey:process.env.OPENAI_API_KEY});const r=await client.audio.transcriptions.create({file,model:process.env.TR_MODEL||'whisper-1',response_format:'json',temperature:0});return Response.json({text:(r as any).text});}catch(e:any){console.error(e);return new Response(JSON.stringify({error:'Transcription error',detail:e?.message}),{status:500});}}